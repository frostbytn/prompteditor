<!DOCTYPE html>
<html lang="en" class="h-full" x-data="settingsManager()" x-init="initSettings()">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Settings</title>
  <script>
    document.documentElement.classList.add(localStorage.getItem('theme') || 'dark');
  </script>
  <script src="https://cdn.tailwindcss.com"></script>
  <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css" />
</head>
<body :class="theme === 'light' ? 'bg-neutral-100 text-black' : 'bg-neutral-950 text-white'" class="h-full p-4 flex flex-col transition-colors duration-300" >
  <header class="mb-4 p-2 rounded flex items-center justify-between bg-neutral-900 text-white transition-colors" :class="theme === 'light' ? 'bg-white text-black' : 'bg-neutral-900 text-white'">
    <h1 class="font-bold">promptbin</h1>
    <nav>
      <a href="index.html" class="p-2" aria-label="Home"><i class="fa-solid fa-house"></i></a>
    </nav>
  </header>
  <div class="bg-neutral-900 rounded-lg shadow-lg p-6 w-72 mx-auto transition-colors" :class="theme === 'light' ? 'bg-white text-black' : 'bg-neutral-900 text-white'">
    <h1 class="text-xl font-bold mb-4 text-center">Settings</h1>
    <label class="flex items-center space-x-2 mb-4">
      <input type="checkbox" @change="toggleTheme(); saveSettings()" :checked="theme === 'light'">
      <span>Light Mode</span>
    </label>

    <div class="mb-4">
      <label class="block text-sm">Max Tokens: <span x-text="nPredict"></span></label>
      <input type="range" min="32" max="512" step="1" x-model.number="nPredict" @input="saveSettings()" class="w-full">
    </div>

    <div class="mb-4">
      <label class="block text-sm">Temperature: <span x-text="temp.toFixed(2)"></span></label>
      <input type="range" min="0" max="1" step="0.01" x-model.number="temp" @input="saveSettings()" class="w-full">
    </div>

    <div class="mb-4">
      <label class="block text-sm">Top&nbsp;K: <span x-text="topK"></span></label>
      <input type="range" min="1" max="100" step="1" x-model.number="topK" @input="saveSettings()" class="w-full">
    </div>

    <a href="index.html" class="underline text-sm">Back</a>
  </div>

<script>
function settingsManager(){
  return {
    theme: localStorage.getItem('theme') || 'dark',
    nPredict: parseInt(localStorage.getItem('nPredict')) || 256,
    temp: parseFloat(localStorage.getItem('temp')) || 0.7,
    topK: parseInt(localStorage.getItem('topK')) || 40,
    initSettings(){
      this.applyTheme();
    },
    toggleTheme(){
      this.theme = this.theme === 'dark' ? 'light' : 'dark';
    },
    applyTheme(){
      document.documentElement.classList.remove('light','dark');
      document.documentElement.classList.add(this.theme);
    },
    saveSettings(){
      localStorage.setItem('theme', this.theme);
      localStorage.setItem('nPredict', this.nPredict);
      localStorage.setItem('temp', this.temp);
      localStorage.setItem('topK', this.topK);
      this.applyTheme();
    }
  }
}
</script>
</body>
</html>
